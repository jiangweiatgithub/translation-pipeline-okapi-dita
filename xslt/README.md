# ENG-ESP\_BT\_Updated.xslt Documentation

This XSLT transforms a bilingual XML file (like the one generated by AlignRobot) into a TMX (Translation Memory eXchange) file that is compatible with CAT tools such as memoQ.

## Purpose

Convert segments with inline markup (like `<b>`, `<i>`, `<u>`, `<xref>`) from custom bilingual HTML/XML into valid TMX with appropriate `<tu>`, `<tuv>`, `<seg>`, `<bpt>`, `<ept>`, and `<ph>` tags. Avoids whitespace and formatting issues common during import.

## Input Example Structure

```xml
<segments>
  <seg id="1">
    <src>The quick <b>brown</b> fox.</src>
    <tgt>El zorro <b>marrón</b> rápido.</tgt>
  </seg>
</segments>
```

## Output Example Structure (TMX)

```xml
<tmx version="1.4b">
  <header srclang="en-GB" ... />
  <body>
    <tu>
      <tuv xml:lang="en-GB">
        <seg>The quick <bpt i="1">&lt;b&gt;</bpt>brown<ept i="1">&lt;/b&gt;</ept> fox.</seg>
      </tuv>
      <tuv xml:lang="es-ES">
        <seg>El zorro <bpt i="1">&lt;b&gt;</bpt>marrón<ept i="1">&lt;/b&gt;</ept> rápido.</seg>
      </tuv>
    </tu>
  </body>
</tmx>
```

## Supported Inline Tags

* `<b>`: bold
* `<i>`: italic
* `<u>`: underline
* `<xref>`: hyperlink

## Features

* ✅ **No pretty printing**: avoids extra spacing that might break CAT imports
* ✅ **Escapes inline tags**: converts formatting tags into TMX-compliant codes
* ✅ **Language filtering**: supports optional filtering by source and target language

## Parameters

### `sourceLang` (optional)

* Default: `''` (empty)
* If specified, only generates `<tuv>` for the matching source language

### `targetLang` (optional)

* Default: `''` (empty)
* If specified, only generates `<tuv>` for the matching target language

### Example usage:

```bash
xsltproc bt2tmx_param.xslt ENG-ESP_BT_Updated.xml > out.tmx

xsltproc \
  --stringparam sourceLang en-GB \
  --stringparam targetLang es-ES \
  bt2tmx_param.xslt ENG-ESP_BT_Updated.xml > filtered.tmx
```

## Technical Notes

* The `generate-id()` function is used to assign unique identifiers to TMX `<bpt>`/`<ept>` tags.
* Attributes of `<xref>` and other inline tags are preserved and escaped as part of `<bpt>` output.
* Text content is preserved without whitespace normalization or stripping.

## Compatibility

Tested with:

* `memoQ`
* `OmegaT`
* `SDL Trados` (basic TMX parsing)
* `xsltproc`, `Saxon-HE`

## Author

* Auto-generated via prompt and verified by ChatGPT for compatibility with memoQ TMX imports.
